<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>√ñzellikler - Rota 34</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        /* Loading animation */
        .loading-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 400px;
        }

        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 5px solid #f3f3f3;
            border-top: 5px solid #FF6B35;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading-text {
            margin-top: 1rem;
            color: #666;
            font-size: 1.1rem;
        }

        /* Media preview styles */
        .feature-media {
            margin-top: 1rem;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .feature-media img,
        .feature-media video {
            width: 100%;
            height: auto;
            display: block;
            border-radius: 15px;
        }

        .feature-media video {
            max-height: 400px;
            object-fit: cover;
        }

        /* Empty state */
        .empty-state {
            text-align: center;
            padding: 4rem 2rem;
            color: #999;
        }

        .empty-state-icon {
            font-size: 5rem;
            margin-bottom: 1rem;
        }

        .empty-state h3 {
            font-size: 1.8rem;
            color: #666;
            margin-bottom: 1rem;
        }

        .empty-state p {
            color: #999;
            font-size: 1.1rem;
        }

        /* Error state */
        .error-state {
            text-align: center;
            padding: 4rem 2rem;
            background: #fff3cd;
            border-radius: 15px;
            border: 2px solid #ffc107;
        }

        .error-state h3 {
            color: #856404;
            margin-bottom: 1rem;
        }
    </style>
</head>
<body>
    <nav id="navbar">
        <div class="nav-container">
            <div class="logo-container" onclick="window.location.href='index.html'">
                <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 200 200'%3E%3Cdefs%3E%3ClinearGradient id='grad1' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%23FFA94D;stop-opacity:1' /%3E%3Cstop offset='50%25' style='stop-color:%23FF6B35;stop-opacity:1' /%3E%3Cstop offset='100%25' style='stop-color:%23F77F00;stop-opacity:1' /%3E%3C/linearGradient%3E%3ClinearGradient id='grad2' x1='100%25' y1='0%25' x2='0%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%23667eea;stop-opacity:1' /%3E%3Cstop offset='50%25' style='stop-color:%23764ba2;stop-opacity:1' /%3E%3Cstop offset='100%25' style='stop-color:%23f093fb;stop-opacity:1' /%3E%3C/linearGradient%3E%3Cfilter id='glow'%3E%3CfeGaussianBlur stdDeviation='4' result='coloredBlur'/%3E%3CfeMerge%3E%3CfeMergeNode in='coloredBlur'/%3E%3CfeMergeNode in='SourceGraphic'/%3E%3C/feMerge%3E%3C/filter%3E%3C/defs%3E%3Ccircle cx='100' cy='100' r='90' fill='url(%23grad1)' opacity='0.2'/%3E%3Cpath d='M 40 60 Q 40 40 60 40 L 140 40 Q 160 40 160 60 Q 160 80 140 90 L 110 105 L 110 130 M 110 150 L 110 155' stroke='white' stroke-width='12' stroke-linecap='round' fill='none' filter='url(%23glow)'/%3E%3Cpath d='M 50 80 A 50 50 0 0 1 150 80' stroke='url(%23grad2)' stroke-width='8' fill='none' opacity='0.6'/%3E%3Cpath d='M 60 100 A 40 40 0 0 0 140 100' stroke='url(%23grad2)' stroke-width='8' fill='none' opacity='0.6'/%3E%3Ccircle cx='100' cy='80' r='30' fill='url(%23grad1)' opacity='0.3'/%3E%3Cpath d='M 85 75 L 95 85 L 115 65' stroke='white' stroke-width='6' stroke-linecap='round' fill='none' filter='url(%23glow)'/%3E%3Cpath d='M 70 120 L 80 130 L 90 120 M 110 120 L 120 130 L 130 120' stroke='url(%23grad2)' stroke-width='6' stroke-linecap='round' fill='none'/%3E%3Ccircle cx='100' cy='100' r='8' fill='white' opacity='0.8'/%3E%3C/svg%3E" alt="Rota 34" class="logo-img">
                <span class="logo-text">Rota 34</span>
            </div>
            <div class="nav-links">
                <a href="features.html">√ñzellikler</a>
                <a href="privacy.html">Gizlilik</a>
                <a href="contact.html">ƒ∞leti≈üim</a>
                <a href="#" class="cta-nav">APK ƒ∞ndir</a>
            </div>
        </div>
    </nav>

    <section class="features" style="padding-top: 12rem;">
        <div class="section-header">
            <h2>Kurumsal D√ºzeyde √ñzellikler</h2>
            <p>Saha √ßalƒ±≈ümanƒ±zƒ± kolayla≈ütƒ±ran, profesyonel ara√ßlar</p>
        </div>
        
        <!-- Loading State -->
        <div id="loadingState" class="loading-container">
            <div style="text-align: center;">
                <div class="loading-spinner"></div>
                <p class="loading-text">√ñzellikler y√ºkleniyor...</p>
            </div>
        </div>

        <!-- Features Grid (will be populated dynamically) -->
        <div id="featuresGrid" class="features-grid" style="display: none;">
            <!-- Features will be loaded here -->
        </div>

        <!-- Empty State -->
        <div id="emptyState" class="empty-state" style="display: none;">
            <div class="empty-state-icon">üì≠</div>
            <h3>Hen√ºz √ñzellik Eklenmedi</h3>
            <p>Admin panelden √∂zellikler ekleyebilirsiniz.</p>
        </div>

        <!-- Error State -->
        <div id="errorState" class="error-state" style="display: none;">
            <h3>‚ö†Ô∏è Y√ºkleme Hatasƒ±</h3>
            <p>√ñzellikler y√ºklenirken bir hata olu≈ütu. L√ºtfen sayfayƒ± yenileyin.</p>
        </div>
    </section>

    <footer>
        <div class="footer-content">
            <div class="footer-brand">
                <h3>SahadanSoft</h3>
                <p>Fortune 500 standartlarƒ±nda saha y√∂netimi √ß√∂z√ºmleri.</p>
            </div>
            <div class="footer-section">
                <h4>Sayfalar</h4>
                <a href="index.html">Ana Sayfa</a>
                <a href="features.html">√ñzellikler</a>
                <a href="privacy.html">Gizlilik</a>
                <a href="contact.html">ƒ∞leti≈üim</a>
            </div>
            <div class="footer-section">
                <h4>ƒ∞leti≈üim</h4>
                <a href="mailto:support@rota34.app">support@rota34.app</a>
                <a href="tel:+905324728428">+90 532 472 84 28</a>
            </div>
        </div>
        <div class="footer-bottom">
            <p>¬© 2026 SahadanSoft. T√ºm haklarƒ± saklƒ±dƒ±r.</p>
        </div>
    </footer>

    <script>
        // Supabase configuration
        const SUPABASE_URL = 'https://zyjtcywneublnmssiqhm.supabase.co';
        const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inp5anRjeXduZXVibG5tc3NpcWhtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc3MTgxMzksImV4cCI6MjA4MzI5NDEzOX0.7o0w5i2VJuzzK0QfEK1l3WMReBHZyehdY0_qZQEuV9U';
        
        let supabaseClient;

        // Initialize Supabase and load features
        async function initializePage() {
            try {
                // Initialize Supabase
                supabaseClient = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);
                console.log('Supabase initialized');

                // Load features
                await loadFeatures();

            } catch (error) {
                console.error('Initialization error:', error);
                showError();
            }
        }

        // Load features from Supabase
        async function loadFeatures() {
            const loadingState = document.getElementById('loadingState');
            const featuresGrid = document.getElementById('featuresGrid');
            const emptyState = document.getElementById('emptyState');
            const errorState = document.getElementById('errorState');

            try {
                console.log('Loading features from Supabase...');

                // Fetch features from Supabase
                const { data, error } = await supabaseClient
                    .from('site_settings')
                    .select('*')
                    .eq('key', 'features')
                    .single();

                if (error && error.code !== 'PGRST116') {
                    throw error;
                }

                console.log('Supabase response:', data);

                // Hide loading
                loadingState.style.display = 'none';

                // Check if features exist
                if (!data || !data.value || !data.value.features || data.value.features.length === 0) {
                    console.log('No features found');
                    emptyState.style.display = 'block';
                    return;
                }

                const features = data.value.features;
                console.log('Features loaded:', features.length);

                // Render features
                renderFeatures(features);
                featuresGrid.style.display = 'grid';

            } catch (error) {
                console.error('Error loading features:', error);
                loadingState.style.display = 'none';
                errorState.style.display = 'block';
            }
        }

        // Render features to the page
        function renderFeatures(features) {
            const grid = document.getElementById('featuresGrid');
            grid.innerHTML = '';

            features.forEach(feature => {
                const card = createFeatureCard(feature);
                grid.appendChild(card);
            });
        }

        // Create a feature card element
        function createFeatureCard(feature) {
            const card = document.createElement('div');
            card.className = 'feature-card';

            // Icon
            const icon = document.createElement('div');
            icon.className = 'feature-icon';
            icon.textContent = feature.icon || '‚≠ê';

            // Title
            const title = document.createElement('h3');
            title.textContent = feature.title;

            // Description
            const description = document.createElement('p');
            description.textContent = feature.description;

            // Append elements
            card.appendChild(icon);
            card.appendChild(title);
            card.appendChild(description);

            // Add media if exists
            if (feature.media) {
                const mediaContainer = document.createElement('div');
                mediaContainer.className = 'feature-media';

                if (feature.media.type === 'image') {
                    const img = document.createElement('img');
                    img.src = feature.media.data;
                    img.alt = feature.title;
                    img.style.width = feature.media.size ? `${feature.media.size}px` : 'auto';
                    mediaContainer.appendChild(img);
                } else if (feature.media.type === 'video') {
                    const video = document.createElement('video');
                    video.src = feature.media.data;
                    video.controls = true;
                    video.style.width = feature.media.size ? `${feature.media.size}px` : 'auto';
                    mediaContainer.appendChild(video);
                }

                card.appendChild(mediaContainer);
            }

            return card;
        }

        // Show error state
        function showError() {
            document.getElementById('loadingState').style.display = 'none';
            document.getElementById('errorState').style.display = 'block';
        }

        // Navbar scroll effect
        window.addEventListener('scroll', () => {
            const nav = document.getElementById('navbar');
            if (window.scrollY > 100) {
                nav.classList.add('scrolled');
            } else {
                nav.classList.remove('scrolled');
            }
        });

        // Initialize page when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initializePage);
        } else {
            initializePage();
        }
    </script>
</body>
</html>